# API Tests Boilerplate

## Overview

This project is designed to provide a boilerplate for comprehensive API tests. The tests ensure that service endpoints are functioning correctly and meet the specified requirements.

## Features

- **API Testing**: Automated tests for various endpoints of a service.
- **Coverage Tool**: Utilizes a custom coverage tool to measure the coverage of the API tests.
- **ESLint**: Enforces code quality and consistency using ESLint rules.

## Getting Started

### Prerequisites

- Node.js v20.12.0
- npm

### Installation

1. Clone the repository:
   ```sh
   git clone https://github.com/your-repo/api-tests-boilerplate.git
   cd api-tests-boilerplate
    ```
2. Install the dependencies:
    ```sh
    npm ci
    ```
3. Run the tests:
    ```sh
    npm test
    ```

### Environment Variables
The project uses environment variables to configure different environments. These variables are defined in the .env file.
Example .env file:
```
#qa1
#ENV=QA1
#AUTH_TOKEN=AIzaSyCi3OgbcJo8mxIjzdaJ3-ihDrTM9d8vmVU
#AUTH_EMAIL=maksym.koiev.cw@playonsports.com
#AUTH_PASSWORD=vanpoz-cucxys-wUtso8
```

### CircleCI Configuration
The project uses CircleCI for continuous integration. The configuration file is located at .circleci/config.yml.
## Coverage Tool

The project includes a custom coverage tool to measure the coverage of the API tests. 
The coverage tool generates a coverage report in the coverage directory. The report includes the coverage percentage for each endpoint and the total coverage percentage for the entire API.
Swagger data downloads and parsed automatically from the program-service and is used to generate the coverage data.
The coverage data is generated by the generateCoverageData function located in src/fixtures/data/normalize-data.ts.

### Usage coverage tool
- Use 'metadata' for each test to specify the endpoint and method being tested.
- Specify the endpoint and method in the metadata object.
```
metadata.uri = '/teamInstance/{id}';
metadata.status = 200;
metadata.method = 'DELETE';
```

metadata fixture automatically verifies if fields are populated correctly and if not it will throw an error.


## ESLint
The project uses ESLint to enforce code quality and consistency. The ESLint configuration is defined in the .eslintrc file.
In the folder eslint-plugin-playwright-rules, you can find custom rules for ESLint that are used to enforce use "metadata" in each test.
Also, it is forbidden use "metadata" in the test description and hooks.
On each commit using husky and lint-staged, the ESLint checks are run automatically.


## Contributing
1. Clone the repository.
2. Create a new branch (git checkout -b feature-branch).
3. Make your changes.
4. Commit your changes (git commit -m 'Add some feature').
5. Push to the branch (git push origin feature-branch).
6. Open a pull request

## License
This project is licensed under the MIT License. See the LICENSE file for details.